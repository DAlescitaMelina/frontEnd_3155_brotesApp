<div class="form-contagio">
  <div id="titulo">
    <h1>{{ edicion ? 'Modificar contagio' : 'Registro de contagio' }}</h1>
  </div>

  <form [formGroup]="form" (submit)="aceptar()">
    <!-- Fecha -->
    <mat-form-field class="example-full-width">
      <mat-label>Fecha</mat-label>
      <input matInput type="date" formControlName="fecha" readonly>
    </mat-form-field>
    <br>

    <!-- Hora -->
    <mat-form-field class="example-full-width">
      <mat-label>Hora</mat-label>
      <input matInput type="time" formControlName="hora" readonly>
    </mat-form-field>
    <br>

    <!-- Zona (solo lectura usando el nombreZona del token) -->
    <mat-form-field class="example-full-width">
      <mat-label>Zona asignada</mat-label>
      <input matInput [value]="nombreZona" readonly>
    </mat-form-field>
    <br>

    <!-- Usuario (nombre del usuario desde token) -->
    <mat-form-field class="example-full-width">
      <mat-label>Usuario</mat-label>
      <input matInput [value]="nombreUsuario" readonly>
    </mat-form-field>
    <br>

    <!-- Enfermedad (seleccionable por el usuario) -->
    <mat-form-field class="example-full-width">
      <mat-label>Enfermedad</mat-label>
      <mat-select formControlName="enf">
        @for (item of listaEnfermedades; track item) {
          <mat-option [value]="item.idEnfermedad">{{ item.nombre }}</mat-option>
        }
      </mat-select>
      <mat-error *ngIf="form.get('enf')?.hasError('required')">
        La enfermedad es obligatoria
      </mat-error>
    </mat-form-field>
    <br>

    <button mat-raised-button color="primary">Registrar</button>
  </form>
</div>
